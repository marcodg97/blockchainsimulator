<!DOCTYPE html>

<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Infovis 2021</title>

		<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/3.1.0/css/adminlte.min.css">

		<script src="https://d3js.org/d3.v7.js"></script>
	</head>

<style>
	svg {
		width: 100%;
		height: 90vh;
	}

	.slidecontainer {
		width:100%;
	}

	.slider {
		-webkit-appearance: none;
		appearance: none;
		width: 100%;
		height: 100%;
		background: #ccc;
		border-radius: 5px;
		outline: none;
		opacity: 0.7;
		-webkit-transition: .2s;
		transition: opacity .2s;
	}

	.slider:hover {
		opacity: 1;
	}

	.slider::-webkit-slider-thumb {
		-webkit-appearance: none;
		appearance: none;
		width: 25px;
		height: 25px;
		border-radius: 50%;
		background: #007bff;
		cursor: pointer;
	}

	.slider::-moz-range-thumb {
		width: 25px;
		height: 25px;
		border-radius: 50%;
		background: #007bff;
		cursor: pointer;
	}
</style>

<body scroll='no' class="hold-transition sidebar-mini" style='overflow: hidden;'>
<div class="wrapper">

	<!-- Navbar -->
	<nav class="main-header navbar navbar-expand navbar-white navbar-light">

		<!-- Left navbar links -->
		<ul class="navbar-nav">
			<li class="nav-item">
				<a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
			</li>
		</ul>

		<!-- Right navbar links -->
		<ul class="navbar-nav ml-auto">
			<li class="nav-item">
				<a class="nav-link" href="#" role="button">
					<i class="fas fa-jedi"></i>
				</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" data-widget="fullscreen" href="#" role="button">
					<i class="fas fa-expand-arrows-alt"></i>
				</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" data-widget="control-sidebar" data-slide="true" href="#" role="button">
					<i class="fas fa-th-large"></i>
				</a>
			</li>
		</ul>
	</nav>
	<!-- /.navbar -->

	<!-- Main Sidebar Container -->
	<aside class="main-sidebar sidebar-light-primary elevation-4">
		<!-- Brand Logo -->
		<a href="index3.html" class="brand-link" align="center">
			<span class="brand-text font-weight-light">Blockchain Simulator</span>
		</a>

		<!-- Sidebar -->
		<div class="sidebar">

			<!-- Sidebar Menu -->
			<nav class="mt-2">
				<ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview" role="menu" data-accordion="false">
					<!-- Add icons to the links using the .nav-icon class
							 with font-awesome or any other icon font library -->
					<li class="nav-item menu-open">
						<a href="#" class="nav-link active">
							<i class="nav-icon fas fa-sliders-h"></i>
							<p>Settings<i class="right fas fa-angle-left"></i></p>
						</a>
						<ul class="nav nav-treeview">
							<li class="nav-item">
								<div class="nav-link active">
									<i class="fas fa-code-branch"></i>
									<p>Fork probability</p>
									<div class="slidecontainer">
										<input type="range" min="1" max="100" value="50" class="slider" id="myRange">
									</div>
								</div>
							</li>
						</ul>
					</li>
					<li class="nav-item">
						<a href="#" class="nav-link">
							<i class=" text-danger nav-icon far fa-play-circle"></i>
							<p>Generate</p>
						</a>
					</li>
				</ul>
			</nav>
			<!-- /.sidebar-menu -->
		</div>
		<!-- /.sidebar -->
	</aside>

	<!-- Content Wrapper. Contains page content -->
	<div id='mainview' class="content-wrapper">
		<!-- Content Header (Page header) -->
		<div class="content-header">
			<div class="container-fluid">
				<div class="row mb-2">
					<div class="col-sm-6">
						<h1 class="m-0">Blockchain</h1>
					</div>
					<div class="col-sm-6">
						<ol class="breadcrumb float-sm-right">
							<li class="breadcrumb-item"><a href="#">Home</a></li>
							<li class="breadcrumb-item active">About</li>
						</ol>
					</div>
				</div>
			</div>
		</div>

		<svg></svg>
	</div>
	<!-- /.content-wrapper -->

	<!-- Control Sidebar -->
	<aside class="control-sidebar control-sidebar-light">
		<!-- Control sidebar content goes here -->
		<div class="p-3">
			<p>By <b>Alice Di Carlo</b>, <b>Andrea Giaccone</b> and <b>Marco De Giovanni</b></p>
		</div>
	</aside>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/3.1.0/js/adminlte.min.js"></script>

<script>

const NODE_WIDTH = 100;

const width = document.body.clientWidth;
const height = document.body.clientHeight;

console.log(width, height);

const svg = d3.select('svg');
const g = svg.append('g');

svg.call(d3.zoom().extent([[0, 0], [720, 512]]).scaleExtent([0.1, 5]).on("zoom", zoomed));

let lastTranslate = undefined;

function zoomed({transform}) {
	let actualModule = transform.x % 100;
	if(actualModule === 0) {
		console.log('renderizza livello verso '+(lastTranslate < transform.x ? 'sinistra':'destra'));
	} else {
		lastTranslate = transform.x;
	}

	g.attr("transform", transform);
}

for(let i=0; i<21; i++) {
	g.append('line')
		.attr('x1', i*NODE_WIDTH+30)
		.attr('y1', 200)
		.attr('x2', (i+1)*NODE_WIDTH+20)
		.attr('y2', 200)
		.attr('style','stroke:rgb(0,0,0)')
	g.append('line')
		.attr('x1', i*NODE_WIDTH)
		.attr('y1', 200)
		.attr('x2', (i+1)*NODE_WIDTH+20)
		.attr('y2', 0)
		.attr('style','stroke:rgb(0,0,0)')
		
	g.append('circle')
		.attr('cx', i*NODE_WIDTH)
		.attr('cy', 200)
		.attr('r', 30)
		.style('fill', '#68b2a1')
		.on('mouseover', (event) => {
			event.srcElement.style.fill = "red";
		})
		.on('mouseout', (event) => {
			event.srcElement.style.fill = "#68b2a1";
		})

	g.append('circle')
		.attr('cx', i*NODE_WIDTH)
		.attr('cy', 0)
		.attr('r', 30)
		.style('fill', '#68b2a1')
		.on('mouseover', (event) => {console.log(event);})

}

</script>
</body>
</html>
